<?xml version="1.0" encoding="UTF-8"?>

<!--
  generic FSM for all games

  https://github.com/Ankzz/easyfsm
-->

<FSM>
    <STATE id="PROLOG" type="ID">
        <MESSAGE id="start" nextState="WAITING_FOR_TEAMS"/>
        <MESSAGE id="reset" nextState="PROLOG"/>
    </STATE>
    <STATE id="WAITING_FOR_TEAMS">
        <!-- Both teams have to report in as "ready". Then they have 10 seconds to revoke their decision. After that
        period the game will start. -->
        <MESSAGE id="teams_ready" nextState="GAME_RUNNING"/>
        <MESSAGE id="reset" nextState="PROLOG"/>
    </STATE>
    <STATE id="GAME_RUNNING">
        <!-- As we have only one button it always starts with blue. red players have to push twice.-->
        <MESSAGE id="pause" nextState="GAME_PAUSING"/>
        <MESSAGE id="reset" nextState="PROLOG"/>
    </STATE>
    <STATE id="GAME_PAUSING">
        <!-- todo: a pausing game should be restarted with a countdown. for later.... -->
        <MESSAGE id="resume" nextState="GAME_RUNNING"/>
        <MESSAGE id="game_over" nextState="EPILOG"/>
        <MESSAGE id="reset" nextState="PROLOG"/>
    </STATE>
    <STATE id="EPILOG">
        <MESSAGE id="reset" nextState="PROLOG"/>
    </STATE>
</FSM>

